# App Overview
Loconomics is a hybrid application built with HTML, CSS and JavaScript with a single codebase. It uses [Phonegap](http://phonegap.com/) to export the app to iOS and Android.

## Preprocessors
### CSS 
[Stylus](http://stylus-lang.com)

### JS 
[Browserify](http://browserify.org/)

### HTML 
[Bliss](html)

## Preferred Dev Tools
### Text Editor
[Brackets](http://brackets.io/)

### Browser
[Chrome](https://www.google.com/chrome/browser/desktop/index.html)

[Chrome Developer Tools](https://developer.chrome.com/devtools)

### Database Query & Administration
[Razor SQL](https://razorsql.com/) is an SQL query tool, database browser, SQL editor, and database administration tool for Windows, Mac OS X, macOS, Linux, and Solaris.

## Main libraries
[jQuery-2](https://jquery.com)

[Bootstrap-3](http://getbootstrap.com)

[Knockoutjs-3.3](http://knockoutjs.com): JavaScript implementation of the Model-View-ViewModel pattern with templates

[Polyfills](https://www.npmjs.com/package/js-polyfills) for ES5 and ES6-Promise

[Momentjs](http://momentjs.com/)

[Nodejs](https://nodejs.org/en/) to assist in front-end development

[Grunt](http://gruntjs.com/) as a tasks runner.


## File Organization
### /app (all app code)
  - /source: source code of the app and templates of configuration files
    - /html/activities: HTML source code. Each file needs to have a matching /js/activities file and optionally /css/activities.   
    - /css/activities: CSS code for matching HTML files. Each file needs to be included in app/source/css/app.styl.   
    - /js/activities: JS code for matching HTML files. Each file needs to be included in app/source/js/app.activities.js.   
    - /js/models: JS code that defines the data from the rest api as javascript objects. Referenced in both JS activities and JS AppModels.   
    - /js/appmodel: JS code for matching JS models that includes actions for that model (update, delete, cancel a booking, etc.) Each file needs to included in app/source/js/appmodel/appmodel.js
  - /build: automatic content, generated by the build process from source
  - /phonegap: automatic content, generated by the build process targetting Phonegap.
  - /build/latest.zip: It's a compressed bundled of the /phonegap content, ready to use in the PhoneGap Build service, used to compile the project for iOS and Android in the cloud (file ignored by git).
  - /node_modules: automatic content, managed by npm
  - /grunt: javascript files that define automated tasks using the Grunt task runner.
  - /trials: some testing files for things being developed, to try in a isolated context, temporary content.
  - /vendor: third party modules that are not at npm, or needed some custom build, or forked third party modules.
  - /package.js: NodeJS package definition file, keeps modules dependencies (npm) and some set-up variables.
  - /Gruntfile.js: file required by the Grunt task runner on the project root folder; more code is organized in the /grunt folder to don't have a fat Gruntfile.js file.

### /docs (all documentation)
- /agile-templates: templates for creating personas and user stories
- /Personas: personas for core users of the app with attached user stories

### /iCalendarLib

### /styleguide (currently obsolete, all design implemented in /app)

### /sysadmin

### /vendor-fonts

### /web (all server-side and API files)
- /_DBUpdate: MS SQL files of any changes to the database to ensure the dev, test and live databases get updated accordingly.
  - /api/v1: CSHTML files that communicate with the server and retrieve API data
    - /me: Information about a user requesting information about themselves, mostly private  
    - /user: Information about a user requesting information about another user, mostly public  
  - /App_Code/LcPricing: C# files that implements...
  - /App_Code/LcRest: C# files that implements the schemes for specific objects in the REST API, and static methods/queries/updates for database operations
  - /en-US/EmailCommunications: CSTHML files for all e-mail communcations sent to users
    - /Admin: Communications to users their account (welcome, password resets, etc.) 
      - /Internal: Communications sent to employees about important user actions (background check/license verification requests)
    - /Booking: Communications to users about bookings
      - /BookNow: All communications for BookNow bookings (from a service professional's website)
      - /Marketplace: All communications for Marketplace bookings (from the Loconomic's website/app)
      - /ServiceProfessionalBooking: All communications for bookings made by the service professional 

## Database  
We run a SQL Server 2008 R2 database hosted on Microsoft Azure. Access to the Live database is limited those who can sign a Business Associate Agreement per our HIPAA Policy.

## API
Create a user account on http://dev.loconomics.com and request access from [@iagosrl](mailto:iagosrl@gmail.com) or [@dani0198](mailto:joshua.danielson@loconomics.com)

## Deploying the App

[Phonegap Build](https://build.phonegap.com/) is used to create the intallation packages for iOS and Android in the cloud. To perform that task in your own computer, you need the SDKs of each platform.

Note that the Phonegap plugins must be installed before building in order to be included in the local build. You can do this from the /app/phonegap directory and typing into the command line:
```
phonegap plugin add https://git-wip-us.apache.org/repos/asf/cordova-plugin-inappbrowser.git
```
The file /app/source/cordova-config.js.xml has a list of all the plugins in use (look at the *gap:plugin* elements), this config is used by the PhoneGap Build service to automatically install them. The version in use is there too, but not the git URL. To find the git URL for a package, search by the package name at [npm](https://www.npmjs.com/).

### iOS 
[Download and install Apple XCode](https://itunes.apple.com/us/app/xcode/id497799835?mt=12) and run the command:
```
phonegap build ios
```  

### Android
[Download and install Android Studio](https://developer.android.com/studio/index.html) and run the command:
```
phonegap build android
```

### Web
In terminal enter command:
```
grunt build-webapp
```
or for html only:
```
grunt build-webapp-html 
```
Replace the following via FTP in Azure from your local machine:
- web/_specialRoutes/app.html (single file)
- web/assets (all folder contents)

## Testing Links
Requires API access.

### API
http://dev.loconomics.com/tests/testrest ()

### Email Communications
http://dev.loconomics.com/tests/testmessaging (request access from @iagoSRL or @dani0198)

### Pages (for testing db changes)
http://dev.loconomics.com/tests/TestAny 







